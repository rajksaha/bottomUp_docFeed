<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bottomUp.myBatis.persistence.AttachmentMapper">

    <insert id="create" parameterType="Attachment"  useGeneratedKeys="true" keyProperty="attachmentID" >

        INSERT INTO `doctor_feed`.content_attachment
        (
            entityType ,
            entityID ,
            description ,
            shortName,
            contentUrl ,
            fileType ,
            sortOrder ,
            entityDate,
            STATUS,
            `updatedOn`,
            `updatedBy`,
            `createdOn`,
            `createdBy`
        )
        VALUES
        (
            #{entityType},
            #{entityID},
            #{description},
            #{shortName},
            #{contentUrl},
            #{fileType},
            #{sortOrder},
            #{entityDate},
            #{status},
            #{updatedOn},
            #{updatedBy},
            #{createdOn},
            #{createdBy}
        );
    </insert>

    <update id="update" parameterType="Attachment">
        UPDATE `doctor_feed`.content_attachment SET
            entityType = #{entityType:VARCHAR},
            entityID = #{entityID:INTEGER},
            description = #{description:VARCHAR},
            shortName = #{shortName:VARCHAR},
            contentUrl = #{contentUrl:VARCHAR},
            fileType = #{fileType:VARCHAR},
            sortOrder = #{sortOrder:INTEGER},
            entityDate = #{entityDate:DATE},
            status = #{status:INTEGER},
            `updatedOn` = #{updatedOn},
			`updatedBy` = #{updatedBy}
            WHERE attachmentID = #{attachmentID}
    </update>

    <delete id="delete" parameterType="long">
        DELETE FROM content_attachment WHERE attachmentID = #{attachmentID}
    </delete>

    <select id="getByID" parameterType="long" resultType="Attachment">
        SELECT
            attachmentID ,
            entityType ,
            entityID ,
            description ,
            shortName,
            contentUrl ,
            fileType ,
            sortOrder ,
            entityDate,
            STATUS,
            `updatedOn`,
            `updatedBy`,
            `createdOn`,
            `createdBy`
        FROM `doctor_feed`.content_attachment WHERE attachmentID = #{attachmentId}
    </select>

    <select id="getAll" parameterType="map" resultType="Attachment">
        SELECT
            attachmentID ,
            entityType ,
            entityID ,
            description ,
            shortName,
            contentUrl ,
            fileType ,
            sortOrder ,
            entityDate,
            STATUS,
            `updatedOn`,
            `updatedBy`,
            `createdOn`,
            `createdBy`
        FROM content_attachment
        WHERE entityID = #{entityID} AND entityType = #{entityType}
    </select>

</mapper>